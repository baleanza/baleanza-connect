// api/offers.js
export default async function handler(req, res) {
  const SOURCE = "https://script.google.com/macros/s/XXXXXXXX/exec?type=offers"; // <-- замени на свой Apps Script URL
  try {
    const r = await fetch(SOURCE, { method: 'GET' });
    const xml = await r.text();

    // Кеширование на стороне CDN / edge через заголовок
    res.setHeader("Content-Type", "application/xml; charset=utf-8");
    res.setHeader("Cache-Control", "public, max-age=600, s-maxage=600"); // 10 минут
    // Можно добавить заголовки безопасности при желании:
    // res.setHeader("X-Content-Type-Options", "nosniff");

    res.status(r.status).send(xml);
  } catch (err) {
    console.error("proxy error:", err);
    res.status(502).send("Bad gateway");
  }
}
