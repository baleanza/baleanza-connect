// api/offers.js
export default async function handler(req, res) {
  const SOURCE = "https://script.google.com/u/0/home/projects/14eZIMtTZ-IzMqfNw4d81zS8qxAthsy6SyOTSWcd0CSU67Q5dfeZVbCI1/exec?type=offers"; // 
  try {
    const r = await fetch(SOURCE, { method: 'GET' });
    const xml = await r.text();

    // Кеширование на стороне CDN / edge через заголовок
    res.setHeader("Content-Type", "application/xml; charset=utf-8");
    res.setHeader("Cache-Control", "public, max-age=600, s-maxage=600"); // 10 минут
    // Можно добавить заголовки безопасности при желании:
    // res.setHeader("X-Content-Type-Options", "nosniff");

    res.status(r.status).send(xml);
  } catch (err) {
    console.error("proxy error:", err);
    res.status(502).send("Bad gateway");
  }
}
